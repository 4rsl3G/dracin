<%
  function labelsHTML(labels) {
    const arr = Array.isArray(labels) ? labels : [];
    return arr.slice(0,3).map(l => `<span class="rounded-full border border-white/10 bg-white/5 px-2 py-0.5 text-[11px] text-white/70">${l}</span>`).join("");
  }
%>

<% function dramaCard(item) { %>
  <a href="/p/drama/<%= item.shortPlayId %>" data-spa
     class="group block overflow-hidden rounded-2xl border border-white/10 bg-white/5 hover:bg-white/10 transition">
    <div class="relative aspect-[3/4] overflow-hidden">
      <img src="<%= item.shortPlayCover || item.groupShortPlayCover %>" alt=""
           class="h-full w-full object-cover group-hover:scale-[1.03] transition duration-300" loading="lazy" />
      <div class="absolute inset-x-0 bottom-0 p-3 bg-gradient-to-t from-black/80 to-transparent">
        <div class="line-clamp-2 text-sm font-semibold leading-snug"><%- item.shortPlayName %></div>
        <div class="mt-2 flex flex-wrap gap-1"><%- labelsHTML(item.labelArray || item.labelNameList || []) %></div>
      </div>
    </div>
  </a>
<% } %>
